<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="GIFT" >

  <resultMap id="GIFT_RESULT" class="com.mpower.domain.model.Gift" >
    <result property="id" column="GIFT_ID" jdbcType="BIGINT" />
    <result property="acknowledgmentDate" column="ACKNOWLEDGMENT_DATE" jdbcType="TIMESTAMP" />
    <result property="amount" column="AMOUNT" jdbcType="DECIMAL" />
    <result property="authCode" column="AUTH_CODE" jdbcType="VARCHAR" />
    <result property="checkNumber" column="CHECK_NUMBER" jdbcType="INTEGER" />
    <result property="comments" column="COMMENTS" jdbcType="VARCHAR" />
    <result property="currencyCode" column="CURRENCY_CODE" jdbcType="VARCHAR" />
    <result property="deductible" column="DEDUCTIBLE" jdbcType="CHAR" />
    <result property="deductibleAmount" column="DEDUCTIBLE_AMOUNT" jdbcType="DECIMAL" />
    <result property="donationDate" column="DONATION_DATE" jdbcType="TIMESTAMP" />
    <result property="entryType" column="ENTRY_TYPE" jdbcType="VARCHAR" />
    <result property="originalGiftId" column="ORIGINAL_GIFT_ID" jdbcType="BIGINT" />
    <result property="paymentMessage" column="PAYMENT_MESSAGE" jdbcType="VARCHAR" />
    <result property="paymentStatus" column="PAYMENT_STATUS" jdbcType="VARCHAR" />
    <result property="paymentType" column="PAYMENT_TYPE" jdbcType="VARCHAR" />
    <result property="postmarkDate" column="POSTMARK_DATE" jdbcType="TIMESTAMP" />
    <result property="refundGiftId" column="REFUND_GIFT_ID" jdbcType="BIGINT" />
    <result property="refundGiftTransactionDate" column="REFUND_GIFT_TRANSACTION_DATE" jdbcType="TIMESTAMP" />
    <result property="sendAcknowledgment" column="SEND_ACKNOWLEDGMENT" jdbcType="CHAR" />
    <result property="transactionDate" column="TRANSACTION_DATE" jdbcType="TIMESTAMP" />
    <result property="txRefNum" column="PAYMENT_TXREFNUM" jdbcType="VARCHAR" />
	<result property="address" resultMap="ADDRESS.ADDRESS_RESULT" /> 
	<result property="email" resultMap="EMAIL.EMAIL_RESULT" /> 
	<result property="commitment" resultMap="COMMITMENT.COMMITMENT_RESULT" /> 
	<result property="paymentSource" resultMap="PAYMENT_SOURCE.PAYMENT_SOURCE_RESULT" /> 
    <result property="person" resultMap="PERSON.PERSON_RESULT" /> 
	<result property="phone" resultMap="PHONE.PHONE_RESULT" /> 
  </resultMap>
  
  <select id="SELECT_GIFT_BY_ID" resultMap="GIFT_RESULT" parameterClass="map" >
    select GIFT_ID, ACKNOWLEDGMENT_DATE, AMOUNT, AUTH_CODE, CHECK_NUMBER, COMMENTS, CURRENCY_CODE,
      DEDUCTIBLE, DEDUCTIBLE_AMOUNT, DONATION_DATE, ENTRY_TYPE, ORIGINAL_GIFT_ID, PAYMENT_MESSAGE,
      PAYMENT_STATUS, PAYMENT_TYPE, POSTMARK_DATE, REFUND_GIFT_ID, REFUND_GIFT_TRANSACTION_DATE,
      SEND_ACKNOWLEDGMENT, TRANSACTION_DATE, PAYMENT_TXREFNUM, ADDRESS_ID, COMMITMENT_ID, EMAIL_ID,
      PAYMENT_SOURCE_ID, PERSON_ID, PHONE_ID
    from GIFT
    where GIFT_ID = #id#
  </select>
  
  <insert id="INSERT_GIFT" parameterClass="com.mpower.domain.model.Gift" >
    insert into GIFT (GIFT_ID, ACKNOWLEDGMENT_DATE, AMOUNT, AUTH_CODE, CHECK_NUMBER, COMMENTS,
      CURRENCY_CODE, DEDUCTIBLE, DEDUCTIBLE_AMOUNT, DONATION_DATE, ENTRY_TYPE, ORIGINAL_GIFT_ID,
      PAYMENT_MESSAGE, PAYMENT_STATUS, PAYMENT_TYPE, POSTMARK_DATE, REFUND_GIFT_ID,
      REFUND_GIFT_TRANSACTION_DATE, SEND_ACKNOWLEDGMENT, TRANSACTION_DATE, PAYMENT_TXREFNUM,
      ADDRESS_ID, COMMITMENT_ID, EMAIL_ID, PAYMENT_SOURCE_ID, PERSON_ID, PHONE_ID)
    values (#id#, #acknowledgmentDate#, #amount#, #authCode#,
      #checkNumber#, #comments#, #currencyCode#, #deductible#,
      #deductibleAmount#, #donationDate#, #entryType#,
      #originalGiftId#, #paymentMessage#, #paymentStatus#,
      #paymentType#, #postmarkDate#, #refundGiftId#,
      #refundGiftTransactionDate#, #sendAcknowledgment#, #transactionDate#,
      #txRefNum#, #address.id#, #commitment.id#, #email.id#,
      #paymentSource.id#, #person.id#, #phone.id#)
  </insert>
  <update id="UPDATE_GIFT" parameterClass="com.mpower.domain.model.Gift" >
    update GIFT
    set ACKNOWLEDGMENT_DATE = #acknowledgmentDate#,
      AMOUNT = #amount#,
      AUTH_CODE = #authCode#,
      CHECK_NUMBER = #checkNumber#,
      COMMENTS = #comments#,
      CURRENCY_CODE = #currencyCode#,
      DEDUCTIBLE = #deductible#,
      DEDUCTIBLE_AMOUNT = #deductibleAmount#,
      DONATION_DATE = #donationDate#,
      ENTRY_TYPE = #entryType#,
      ORIGINAL_GIFT_ID = #originalGiftId#,
      PAYMENT_MESSAGE = #paymentMessage#,
      PAYMENT_STATUS = #paymentStatus#,
      PAYMENT_TYPE = #paymentType#,
      POSTMARK_DATE = #postmarkDate#,
      REFUND_GIFT_ID = #refundGiftId#,
      REFUND_GIFT_TRANSACTION_DATE = #refundGiftTransactionDate#,
      SEND_ACKNOWLEDGMENT = #sendAcknowledgment#,
      TRANSACTION_DATE = #transactionDate#,
      PAYMENT_TXREFNUM = #txRefNum#,
      ADDRESS_ID = #address.id#,
      COMMITMENT_ID = #commitment.id#,
      EMAIL_ID = #email.id#,
      PAYMENT_SOURCE_ID = #paymentSource.id#,
      PERSON_ID = #person.id#,
      PHONE_ID = #phone.id#
    where GIFT_ID = #id#
  </update>
</sqlMap>