<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="PHONE">

	<resultMap id="PHONE_RESULT" class="com.mpower.domain.model.Phone">
		<result property="id" column="PHONE_ID" jdbcType="BIGINT" />
		<result property="activationStatus" column="ACTIVATION_STATUS" jdbcType="VARCHAR" />
		<result property="comment" column="COMMENT" jdbcType="VARCHAR" />
		<result property="createDate" column="CREATE_DATE" jdbcType="TIMESTAMP" />
		<result property="effectiveDate" column="EFFECTIVE_DATE" jdbcType="TIMESTAMP" />
		<result property="inactive" column="INACTIVE" jdbcType="BIT" />
		<result property="number" column="NUMBER" jdbcType="VARCHAR" />
		<result property="phoneType" column="PHONE_TYPE" jdbcType="VARCHAR" />
		<result property="provider" column="PROVIDER" jdbcType="VARCHAR" />
		<result property="receiveCorrespondence" column="RECEIVE_CORRESPONDENCE" jdbcType="BIT" />
		<result property="seasonalEndDate" column="SEASONAL_END_DATE" jdbcType="TIMESTAMP" />
		<result property="seasonalStartDate" column="SEASONAL_START_DATE" jdbcType="TIMESTAMP" />
		<result property="sms" column="SMS" jdbcType="VARCHAR" />
		<result property="temporaryEndDate" column="TEMPORARY_END_DATE"	jdbcType="TIMESTAMP" />
		<result property="temporaryStartDate" column="TEMPORARY_START_DATE"	jdbcType="TIMESTAMP" />
		<result property="updateDate" column="UPDATE_DATE" jdbcType="TIMESTAMP" />
		<result property="personId" column="PERSON_ID" jdbcType="BIGINT" />
	</resultMap>

	<select id="SELECT_PHONE_BY_ID" resultMap="PHONE_RESULT" parameterClass="com.mpower.domain.model.Phone">
		select PHONE_ID, ACTIVATION_STATUS, COMMENT, CREATE_DATE, EFFECTIVE_DATE,
		INACTIVE, NUMBER,
		PHONE_TYPE, PROVIDER, RECEIVE_CORRESPONDENCE, SEASONAL_END_DATE,
		SEASONAL_START_DATE, SMS,
		TEMPORARY_END_DATE, TEMPORARY_START_DATE, UPDATE_DATE, PERSON_ID
		from PHONE
		where PHONE_ID = #id#
	</select>

	<insert id="INSERT_PHONE" parameterClass="com.mpower.domain.model.Phone">
		insert into PHONE (PHONE_ID, ACTIVATION_STATUS, COMMENT, CREATE_DATE, EFFECTIVE_DATE, INACTIVE,
		NUMBER, PHONE_TYPE, PROVIDER, RECEIVE_CORRESPONDENCE, SEASONAL_END_DATE, SEASONAL_START_DATE,
		SMS, TEMPORARY_END_DATE, TEMPORARY_START_DATE, UPDATE_DATE, PERSON_ID)
		values (#id#, #activationStatus#, #comment#, now(),
		#effectiveDate#, #inactive#, #number#, #phoneType#,
		#provider#, #receiveCorrespondence#, #seasonalEndDate#,
		#seasonalStartDate#, #sms#, #temporaryEndDate#,
		#temporaryStartDate#, now(), #personId#)
		<selectKey keyProperty="id" resultClass="long">
			SELECT LAST_INSERT_ID() AS value
		</selectKey>
	</insert>

	<update id="UPDATE_PHONE" parameterClass="com.mpower.domain.model.Phone">
		update PHONE
		set ACTIVATION_STATUS = #activationStatus#,
		COMMENT = #comment#,
		EFFECTIVE_DATE = #effectiveDate#,
		INACTIVE = #inactive#,
		NUMBER = #number#,
		PHONE_TYPE = #phoneType#,
		PROVIDER = #provider#,
		RECEIVE_CORRESPONDENCE = #receiveCorrespondence#,
		SEASONAL_END_DATE = #seasonalEndDate#,
		SEASONAL_START_DATE = #seasonalStartDate#,
		SMS = #sms#,
		TEMPORARY_END_DATE = #temporaryEndDate#,
		TEMPORARY_START_DATE = #temporaryStartDate#,
		UPDATE_DATE = now(),
		PERSON_ID = #personId#
		where PHONE_ID = #id#
	</update>
	
</sqlMap>